(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesC/pages/apply/add/add"],{"0ffc":function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return r})),o.d(e,"a",(function(){return n}));var n={uniDatetimePicker:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(o.bind(null,"6032"))}},i=function(){var t=this,e=t.$createElement;t._self._c},r=[]},"2f01":function(t,e,o){},"3dfe":function(t,e,o){"use strict";(function(t){o("a5e5");n(o("dc04"));var e=n(o("9bd4"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=o,t(e.default)}).call(this,o("97ff")["createPage"])},"5cc4":function(t,e,o){"use strict";(function(t){function o(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={data:function(){return{forms:{nick_name:"",quartel_account:"",quartel_id:"",bank:"",bank_card:"",per_amount:"",pre_time:"",capital:"",rate:"",count_money:"",sign_name:"",uplode_img:"",note:"",job_id:""},icon:[],type:[{id:1,name:"造林",checked:!1},{id:2,name:"砍伐",checked:!0}],checkedArrType:2,ProcessList:[],quartel_accountShow:!1,id:"",emplo_id:"",jobIndex:-1,jobList:[]}},onShow:function(){var t=this.common.get("signature");t&&(this.forms.sign_name=t)},onLoad:function(){var t=this;this.icon=this.common.get("icon"),this.http({url:this.api.userInfo,method:"POST",data:{uid:this.common.get("uid"),token:this.common.get("token")},success:function(e){t.forms.nick_name=e.nick_name,t.forms.bank=e.bank,t.forms.bank_card=e.bank_card,t.id=e.id}});var e=(new Date).toISOString();this.forms.pre_time=this.dateFormat(e)},methods:{signImage:function(){var t=[];t[0]=this.forms.sign_name,wx.previewImage({current:0,urls:t})},signature:function(){t.navigateTo({url:"/pagesA/pages/signature/signature"})},changeName:function(t){this.jobIndex=t.target.value,this.forms.job_id=this.jobList[this.jobIndex].id},hideShow:function(){this.quartel_accountShow=!1},search_blur:function(t,e){var o=this;setTimeout((function(){"quartel_account"==e&&(""==o.forms.quartel_id?o.forms.quartel_account="":o.ProcessList.map((function(t,e){o.forms.quartel_id==t.id&&(o.forms.quartel_account=t.quartel_name)})))}),200)},toDetail:function(t,e){var o=this;"quartel_account"==e&&(console.log("event",t),this.forms.quartel_id=t.id,this.forms.quartel_account=t.quartel_name,this.emplo_id=t.employ_id,this.emplo_name=t.employ_name,this.quartel_accountShow=!1,""!==this.forms.per_amount&&this.http({url:this.api.project_funds,method:"POST",data:{uid:this.common.get("uid"),token:this.common.get("token"),type:this.checkedArrType,emplo_id:this.emplo_id,quartel_id:this.forms.quartel_id,count_money:this.forms.per_amount},success:function(t){o.forms.capital=t.dx_count_money,o.forms.rate=t.rate,o.forms.count_money=t.count_money}}),2==this.checkedArrType&&this.http({url:this.api.my_data_emplo_id,method:"POST",data:{uid:this.common.get("uid"),token:this.common.get("token"),quartel_id:this.forms.quartel_id,emplo_id:this.id},success:function(t){o.http({url:o.api.Quartel_emplo_job_list,method:"POST",data:{uid:o.common.get("uid"),token:o.common.get("token"),quartel_id:o.forms.quartel_id,emplo_id:t.scalar},success:function(t){o.jobList=t.list}})}}))},search_site:function(t,e){var o=this,n=t.detail.value;"quartel_account"==e&&(this.quartel_accountShow=!0,this.http({url:this.api.my_data_quartelList,method:"POST",data:{uid:this.common.get("uid"),token:this.common.get("token"),type:this.checkedArrType,quartel_name:n},success:function(t){o.ProcessList=t.list}}))},dateFormat:function(t){var e=new Date(t),o=e.getFullYear(),n=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,i=e.getDate()<10?"0"+e.getDate():e.getDate(),r=e.getHours()<10?"0"+e.getHours():e.getHours(),a=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),c=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return o+"-"+n+"-"+i+" "+r+":"+a+":"+c},changeCheckType:function(t){console.log(t),this.checkedArrType=t.detail.value,this.forms.quartel_id="",this.forms.quartel_account="",this.forms.capital="",this.forms.rate="",this.forms.count_money="",this.forms.per_amount=""},uploadImage:function(){var e=this;t.chooseImage({count:1,success:function(o){var n=o.tempFilePaths[0];t.uploadFile({url:e.common.baseUrl+e.api.upload,filePath:n,name:"file",success:function(o){var n=JSON.parse(o.data);1==n.code?e.forms.uplode_img=n.data.scalar:t.showToast({title:"上传失败",icon:"none"})},fail:function(e){t.showToast({title:"上传失败,"+e,icon:"none"})}})}})},previewImage:function(){var t=[];t[0]=this.forms.uplode_img,wx.previewImage({current:0,urls:t})},changeDate:function(t,e){"pre_time"==e&&(this.forms.pre_time=t)},per_amount:function(t){var e=this,o=t.target.value,n=/[^\d.]/g;this.$nextTick((function(){""==e.forms.quartel_id?e.forms.per_amount=o.replace(n,""):(e.forms.per_amount=o.replace(n,""),e.http({url:e.api.project_funds,method:"POST",data:{uid:e.common.get("uid"),token:e.common.get("token"),type:e.checkedArrType,emplo_id:e.emplo_id,quartel_id:e.forms.quartel_id,count_money:e.forms.per_amount},success:function(t){e.forms.capital=t.dx_count_money,e.forms.rate=t.rate,e.forms.count_money=t.count_money}}))}))},previous:function(){var e=getCurrentPages(),o=e[e.length-2];t.navigateBack({success:function(){o.onLoad()}})},add:function(){var e=this;t.showModal({title:"提示",content:"确定当前操作吗？",success:function(o){o.confirm&&e.http({url:e.api.Quartel_prepaid,method:"POST",data:n({uid:e.common.get("uid"),token:e.common.get("token"),emplo_name:e.emplo_name,emplo_id:e.emplo_id,type:e.checkedArrType},e.forms),success:function(o){t.showToast({title:"操作成功",icon:"none",duration:2e3}),setTimeout((function(){e.previous(),that.common.set("signature","")}),500)}})},fail:function(){},complete:function(){}})}}};e.default=r}).call(this,o("d5d0")["default"])},6162:function(t,e,o){"use strict";var n=o("2f01"),i=o.n(n);i.a},"9bd4":function(t,e,o){"use strict";o.r(e);var n=o("0ffc"),i=o("f0bb");for(var r in i)"default"!==r&&function(t){o.d(e,t,(function(){return i[t]}))}(r);o("6162");var a,c=o("f0c5"),u=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=u.exports},f0bb:function(t,e,o){"use strict";o.r(e);var n=o("5cc4"),i=o.n(n);for(var r in n)"default"!==r&&function(t){o.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a}},[["3dfe","common/runtime","common/vendor"]]]);