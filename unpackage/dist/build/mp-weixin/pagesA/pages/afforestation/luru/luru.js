require('../../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/pages/afforestation/luru/luru"],{"565e":function(t,e,o){"use strict";o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return i}));var i={uniDatetimePicker:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(o.bind(null,"6032"))}},n=function(){var t=this,e=t.$createElement;t._self._c},a=[]},"7d3c":function(t,e,o){},"8e36":function(t,e,o){"use strict";var i=o("7d3c"),n=o.n(i);n.a},"99d9":function(t,e,o){"use strict";o.r(e);var i=o("d6e3"),n=o.n(i);for(var a in i)"default"!==a&&function(t){o.d(e,t,(function(){return i[t]}))}(a);e["default"]=n.a},a7e7:function(t,e,o){"use strict";(function(t){o("a5e5");i(o("dc04"));var e=i(o("afd7"));function i(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=o,t(e.default)}).call(this,o("97ff")["createPage"])},afd7:function(t,e,o){"use strict";o.r(e);var i=o("565e"),n=o("99d9");for(var a in n)"default"!==a&&function(t){o.d(e,t,(function(){return n[t]}))}(a);o("8e36");var r,s=o("f0c5"),u=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);e["default"]=u.exports},d6e3:function(t,e,o){"use strict";(function(t){function o(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function i(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{form:{number:"",unit_price:"",quartel_account:"",quartel_id:"",pre_time:"",note:"",jobs_id:"",pro_name:""},forms:{quartel_account:"",bank:"",bank_card:"",per_amount:"",pre_time:"",capital:"",rate:"",count_money:"",sign:"",uplode_img:"",note:"",emplo_name:"",emplo_id:""},data:"",type:[{id:1,name:"是"},{id:0,name:"否"}],checkedArrType:0,items:["预支","工程款计算"],count:0,NameList:[],ProcessList:[],sign:"",icon:[],yuzhiShow:!1,gongShow:!1,gongxuShow:!1,signature:""}},onLoad:function(){var e=this;this.icon=this.common.get("icon"),this.data=this.common.get("zaolin"),this.form.quartel_account=this.data.quartel_account,this.form.quartel_id=this.data.id,this.forms.quartel_account=this.data.quartel_account,this.forms.quartel_id=this.data.id,t.setNavigationBarTitle({title:"录入-"+this.data.quartel_name+this.data.quartel_account}),this.http({url:this.api.My_Data,method:"POST",data:{uid:this.common.get("uid"),token:this.common.get("token")},success:function(t){e.forms.sign=t.name,e.sign=t.name}});var o=(new Date).toISOString();this.forms.pre_time=this.dateFormat(o)},methods:{hideShow:function(){this.yuzhiShow=!1,this.gongShow=!1,this.gongxuShow=!1},search_blur:function(t,e){var o=this;setTimeout((function(){"yuzhi"==e?""==o.forms.emplo_id?o.forms.emplo_name="":o.NameList.map((function(t,e){o.forms.emplo_id==t.peasant_id&&(o.forms.emplo_name=t.nick_name)})):"gong"==e?""==o.form.emplo_id?o.form.emplo_name="":o.NameList.map((function(t,e){o.form.emplo_id==t.peasant_id&&(o.form.emplo_name=t.nick_name)})):"gongxu"==e&&(""==o.form.jobs_id?o.form.pro_name="":o.ProcessList.map((function(t,e){o.form.jobs_id==t.id&&(o.form.pro_name=t.pro_name)})))}),200)},toDetail:function(t,e){var o=this;console.log("toDetailevent",t),console.log("toDetailtext",e),"yuzhi"==e?(this.forms.emplo_id=t.peasant_id,this.forms.emplo_name=t.nick_name,""!==this.forms.per_amount&&this.http({url:this.api.project_funds,method:"POST",data:{uid:this.common.get("uid"),token:this.common.get("token"),type:1,emplo_id:this.forms.emplo_id,quartel_id:this.data.id,count_money:this.forms.per_amount},success:function(t){o.forms.capital=t.dx_count_money,o.forms.rate=t.rate,o.forms.count_money=t.count_money}}),this.forms.bank=t.bank,this.forms.bank_card=t.bank_card,this.yuzhiShow=!1):"gong"==e?(this.gongShow=!1,this.form.emplo_id=t.peasant_id,this.form.emplo_name=t.nick_name):"gongxu"==e&&(this.gongxuShow=!1,this.form.jobs_id=t.id,this.form.pro_name=t.pro_name,this.form.unit_price=t.wage,this.form.total_price=Number(this.form.unit_price)*Number(this.form.number))},search_site:function(t,e){var o=this,i=t.detail.value;"yuzhi"==e?(this.yuzhiShow=!0,this.http({url:this.api.pounds_employees,method:"POST",data:{uid:this.common.get("uid"),token:this.common.get("token"),quartel_id:this.data.id,nick_name:i},success:function(t){o.NameList=t.list}})):"gong"==e?(this.gongShow=!0,this.http({url:this.api.pounds_employees,method:"POST",data:{uid:this.common.get("uid"),token:this.common.get("token"),quartel_id:this.data.id,nick_name:i},success:function(t){o.NameList=t.list}})):"gongxu"==e&&(this.gongxuShow=!0,this.http({url:this.api.getPositionList,method:"POST",data:{uid:this.common.get("uid"),token:this.common.get("token"),contact_type:7,quartel_id:this.data.id,name:i},success:function(t){o.ProcessList=t.list}}))},dateFormat:function(t){var e=new Date(t),o=e.getFullYear(),i=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate(),a=e.getHours()<10?"0"+e.getHours():e.getHours(),r=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),s=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return o+"-"+i+"-"+n+" "+a+":"+r+":"+s},print:function(){if(0==this.count){var e=this.forms;e.text="luruyuzhi",e.labelNum=1,e.the_name=this.forms.emplo_name,1==this.checkedArrType?e.transfer_text="是":e.transfer_text="否",e.title="造林预支录入-"+this.data.quartel_name+this.data.quartel_account,t.navigateTo({url:"/pagesA/pages/print/print?data="+encodeURIComponent(JSON.stringify(e))})}else{var o=this.form;o.text="lurujisuan",o.labelNum=1,o.the_name=this.form.emplo_name,o.the_gongxu=this.form.pro_name,o.title="造林工程款计算录入-"+this.data.quartel_name+this.data.quartel_account,t.navigateTo({url:"/pagesA/pages/print/print?data="+encodeURIComponent(JSON.stringify(o))})}},changeDate:function(t,e){"pre_time"==e?this.forms.pre_time=t:"zz_time"==e?this.forms.zz_time=t:"pre_time_form"==e&&(this.form.pre_time=t)},changeCheckType:function(t){if(this.checkedArrType=t.detail.value,1==this.checkedArrType){var e=(new Date).toISOString();this.forms.zz_time=this.dateFormat(e)}else this.forms.zz_time=""},number:function(t){var e=this,o=t.target.value,i=/[^\d.]/g;this.$nextTick((function(){e.form.number=o.replace(i,""),e.form.total_price=Number(e.form.unit_price)*Number(e.form.number).toFixed(2)}))},per_amount:function(t){var e=this,o=t.target.value,i=/[^\d.]/g;this.$nextTick((function(){""==e.forms.emplo_id?e.forms.per_amount=o.replace(i,""):(e.forms.per_amount=o.replace(i,""),e.http({url:e.api.project_funds,method:"POST",data:{uid:e.common.get("uid"),token:e.common.get("token"),type:1,emplo_id:e.forms.emplo_id,quartel_id:e.data.id,count_money:e.forms.per_amount},success:function(t){e.forms.capital=t.dx_count_money,e.forms.rate=t.rate,e.forms.count_money=t.count_money}}))}))},qingkong:function(){if(0==this.count){this.forms={quartel_account:"",bank:"",bank_card:"",per_amount:"",capital:"",rate:"",count_money:"",sign:"",uplode_img:"",pre_time:"",zz_time:"",emplo_id:"",emplo_name:""},this.forms.quartel_account=this.data.quartel_account,this.forms.quartel_id=this.data.id,this.forms.sign=this.sign,this.checkedArrType=0;var t=(new Date).toISOString();this.forms.pre_time=this.dateFormat(t)}else{this.form={number:"",unit_price:"",quartel_account:"",quartel_id:"",pre_time:"",note:"",emplo_id:"",emplo_name:"",pro_name:"",jobs_id:""},this.form.quartel_account=this.data.quartel_account,this.form.quartel_id=this.data.id;var e=(new Date).toISOString();this.form.pre_time=this.dateFormat(e)}},change:function(t){this.count=t;var e=(new Date).toISOString();0==this.count?this.forms.pre_time||(this.forms.pre_time=this.dateFormat(e)):this.form.pre_time||(this.form.pre_time=this.dateFormat(e))},uploadImage:function(){var e=this;t.chooseImage({count:1,success:function(o){var i=o.tempFilePaths[0];t.uploadFile({url:e.common.baseUrl+e.api.upload,filePath:i,name:"file",success:function(o){var i=JSON.parse(o.data);1==i.code?e.forms.uplode_img=i.data.scalar:t.showToast({title:"上传失败",icon:"none"})},fail:function(e){t.showToast({title:"上传失败,"+e,icon:"none"})}})}})},previewImage:function(){var t=[];t[0]=this.forms.uplode_img,wx.previewImage({current:0,urls:t})},previous:function(){var e=getCurrentPages(),o=e[e.length-2];t.navigateBack({success:function(){o.onLoad()}})},add:function(){var e=this;1==this.count?t.showModal({title:"提示",content:"确定当前操作吗？",success:function(o){o.confirm&&e.http({url:e.api.calculateAdds,method:"POST",data:i({uid:e.common.get("uid"),token:e.common.get("token"),quartel_id:e.data.id},e.form),success:function(e){t.showToast({title:"操作成功",icon:"none",duration:2e3})}})},fail:function(){},complete:function(){}}):t.showModal({title:"提示",content:"确定当前操作吗？",success:function(o){o.confirm&&e.http({url:e.api.afforestationAdds,method:"POST",data:i({uid:e.common.get("uid"),token:e.common.get("token"),type:1,quartel_id:e.data.id,is_transfer:e.checkedArrType},e.forms),success:function(e){t.showToast({title:"操作成功",icon:"none",duration:2e3})}})},fail:function(){},complete:function(){}})}}};e.default=a}).call(this,o("d5d0")["default"])}},[["a7e7","common/runtime","common/vendor"]]]);