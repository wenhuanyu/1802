require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/pages/signature/signature"],{5944:function(t,n,e){"use strict";e.r(n);var a=e("64b3"),i=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(n,t,(function(){return a[t]}))}(o);n["default"]=i.a},6022:function(t,n,e){"use strict";var a;e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return o})),e.d(n,"a",(function(){return a}));var i=function(){var t=this,n=t.$createElement;t._self._c},o=[]},"64b3":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e,a=[],i={data:function(){return{ctx:"",points:[]}},onLoad:function(n){t.setNavigationBarTitle({title:"签名"}),e=this,this.ctx=t.createCanvasContext("mycanvas",this),this.ctx.lineWidth=4,this.ctx.lineCap="round",this.ctx.lineJoin="round"},methods:{touchstart:function(t){var n=t.changedTouches[0].x,e=t.changedTouches[0].y,a={X:n,Y:e};this.points.push(a),this.ctx.beginPath()},touchmove:function(t){var n=t.changedTouches[0].x,e=t.changedTouches[0].y,i={X:n,Y:e};this.points.push(i);var o=this.points.length;o>=2&&this.draw(),a.push(i)},touchend:function(){this.points=[]},draw:function(){var t=this.points[0],n=this.points[1];this.points.shift(),this.ctx.moveTo(t.X,t.Y),this.ctx.lineTo(n.X,n.Y),this.ctx.stroke(),this.ctx.draw(!0)},handleCancel:function(){t.navigateBack({delta:1})},handleReset:function(){t.getSystemInfo({success:function(t){var n=t.windowWidth,a=t.windowHeight;e.ctx.clearRect(0,0,n,a),e.ctx.draw(!0)}}),a=[]},previous:function(){var n=getCurrentPages(),e=n[n.length-2];t.navigateBack({success:function(){e.onLoad()}})},handleConfirm:function(){0!=a.length?t.canvasToTempFilePath({canvasId:"mycanvas",success:function(n){console.log("res",n);var a=n.tempFilePath;t.compressImage({src:a,quality:100,rotate:270,success:function(n){console.log("result.tempFilePath",n.tempFilePath),t.uploadFile({url:e.common.baseUrl+e.api.upload,filePath:n.tempFilePath,name:"file",success:function(n){var a=JSON.parse(n.data);console.log("data",a),1==a.code?(e.common.set("signature",a.data.scalar),setTimeout((function(){e.previous()}),500)):t.showToast({title:"上传失败",icon:"none"})},fail:function(n){t.showToast({title:"上传失败,"+n,icon:"none"})}})}})}}):t.showToast({title:"请先签名",icon:"none",duration:2e3})}}};n.default=i}).call(this,e("d5d0")["default"])},"7ada":function(t,n,e){"use strict";var a=e("e402"),i=e.n(a);i.a},e402:function(t,n,e){},e4b5:function(t,n,e){"use strict";(function(t){e("a5e5");a(e("dc04"));var n=a(e("f2eb"));function a(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(n.default)}).call(this,e("97ff")["createPage"])},f2eb:function(t,n,e){"use strict";e.r(n);var a=e("6022"),i=e("5944");for(var o in i)"default"!==o&&function(t){e.d(n,t,(function(){return i[t]}))}(o);e("7ada");var c,s=e("f0c5"),u=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"327dacbc",null,!1,a["a"],c);n["default"]=u.exports}},[["e4b5","common/runtime","common/vendor"]]]);